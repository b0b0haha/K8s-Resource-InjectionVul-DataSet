From 723e5c628894c12b5c0acc9ea4231188a52a5f03 Mon Sep 17 00:00:00 2001
From: Mariam Fahmy <mariam.fahmy@nirmata.com>
Date: Mon, 5 Feb 2024 15:56:17 +0200
Subject: [PATCH] fix

Signed-off-by: Mariam Fahmy <mariam.fahmy@nirmata.com>
---
 .../webhook-registeration/chainsaw-test.yaml                  | 2 +-
 .../webhook-configurations/webhook-registeration/policy.yaml  | 2 --
 .../webhook-configurations/webhook-registeration/webhook.yaml | 4 ++--
 3 files changed, 3 insertions(+), 5 deletions(-)

diff --git a/test/conformance/chainsaw/webhook-configurations/webhook-registeration/chainsaw-test.yaml b/test/conformance/chainsaw/webhook-configurations/webhook-registeration/chainsaw-test.yaml
index 32755567a2bd..4eec94825e98 100755
--- a/test/conformance/chainsaw/webhook-configurations/webhook-registeration/chainsaw-test.yaml
+++ b/test/conformance/chainsaw/webhook-configurations/webhook-registeration/chainsaw-test.yaml
@@ -25,4 +25,4 @@ spec:
   - name: step-04
     try:
     - error:
-      file: webhook.yaml
+        file: webhook.yaml
diff --git a/test/conformance/chainsaw/webhook-configurations/webhook-registeration/policy.yaml b/test/conformance/chainsaw/webhook-configurations/webhook-registeration/policy.yaml
index 8265c1c428f6..8404cb2216fb 100644
--- a/test/conformance/chainsaw/webhook-configurations/webhook-registeration/policy.yaml
+++ b/test/conformance/chainsaw/webhook-configurations/webhook-registeration/policy.yaml
@@ -10,8 +10,6 @@ spec:
   background: true
   webhookConfiguration:
     matchConditions:
-    - name: "select-namespace"
-      expression: '(object.metadata.namespace == "cpol-fine-grained-match-conditions-ns")'
     - name: 'exclude-requests-by-groups'
       expression: '!("system:nodes" in request.userInfo.groups)' 
   rules:
diff --git a/test/conformance/chainsaw/webhook-configurations/webhook-registeration/webhook.yaml b/test/conformance/chainsaw/webhook-configurations/webhook-registeration/webhook.yaml
index db3b24b63664..2924b1115c09 100644
--- a/test/conformance/chainsaw/webhook-configurations/webhook-registeration/webhook.yaml
+++ b/test/conformance/chainsaw/webhook-configurations/webhook-registeration/webhook.yaml
@@ -7,10 +7,10 @@ metadata:
 webhooks:
 - failurePolicy: Ignore
   matchConditions:
-  - expression: '(object.metadata.namespace == "cpol-fine-grained-match-conditions-ns")'
-    name: select-namespace
   - expression: '!("system:nodes" in request.userInfo.groups)'
     name: exclude-requests-by-groups
+  matchPolicy: Equivalent
+  name: validate.kyverno.svc-ignore-finegrained-cpol-fine-grained-match-conditions-disallow-latest-image-tag-1
   rules:
   - apiGroups:
     - ""
