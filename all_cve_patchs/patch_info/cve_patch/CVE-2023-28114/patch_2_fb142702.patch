From fb1427025764e1eebc4a7710d902c4f22cae2610 Mon Sep 17 00:00:00 2001
From: Marco Iorio <marco.iorio@isovalent.com>
Date: Mon, 6 Mar 2023 14:48:46 +0100
Subject: [PATCH] clustermesh: correctly mount the etcd data dir in the init
 container

This commit fixes an incorrect volume mount specification for the init
container of the clustermesh-apiserver deployment created through
'cilium clustermesh enable', that caused the operations performed in the
init container itself to be disregarded.

Signed-off-by: Marco Iorio <marco.iorio@isovalent.com>
---
 clustermesh/clustermesh.go | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/clustermesh/clustermesh.go b/clustermesh/clustermesh.go
index 628b67f02b..3e774d2681 100644
--- a/clustermesh/clustermesh.go
+++ b/clustermesh/clustermesh.go
@@ -320,7 +320,7 @@ func (k *K8sClusterMesh) generateDeployment(clustermeshApiserverArgs []string) *
 							VolumeMounts: []corev1.VolumeMount{
 								{
 									Name:      "etcd-data-dir",
-									MountPath: "etcd-data-dir",
+									MountPath: "/var/run/etcd",
 								},
 							},
 						},
